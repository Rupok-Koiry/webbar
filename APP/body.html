
<div id="app">
  <!--screen before-start-->
  <div id="screen-before-start" data-name-screen="before-start" class="screen screen-before-start">
      <div class="screen__content">
          <div class="screen__body">
            <div class="logo">
              <img src="./assets/images/logo-before-start-screen.png" alt/>
            </div>
          </div>
      </div>
  </div>

  <!--screen start-->
  <div id="screen-start" data-name-screen="start" data-switch-screen="close" class="screen screen-start">
      <div class="screen__content">
          <div class="screen__body">
              <div class="logo">
                <img src="./assets/images/logo-start-screen-crop.png" alt/>
              </div>
              <div class="reflection">
                <img src="./assets/images/reflection-start-screen.png" alt/>
              </div>
              <div class="text-info">화면을 터치 해주세요</div>
          </div>
      </div>
  </div>

  <!--screen before portal-->
  <div id="screen-before-portal" data-name-screen="before-portal" data-switch-screen="close" class="screen screen-before-portal">
    <div class="screen__content">
      <div class="screen__body">
          <div class="place-portal-text">
            <div class="container">
              <p class="instruction-item"><span class="instruction-number">1</span>AR 체험을 위해 충분한 공간을 확보해주세요</p>
              <p class="instruction-item"><span class="instruction-number">2</span>카메라를 바닥과 수직이 되게 들어주세요</p>
              <p class="instruction-item"><span class="instruction-number">3</span>화면 터치 후 원형 입구 안으로 들어가보세요</p>
            </div>
          </div>
      </div>
    </div>
  </div>
  
  <!--screen portal-->
  <div id="screen-portal" data-name-screen="portal" class="screen screen-portal">
    <div class="screen__content">
      <div class="screen__body">
        <div class="buttons-container">
          <div class="button-container">
            <button class="back-button button" data-switch-screen="choose-portal" data-hide-scene="true" data-name="back" xrextras-tap-recenter>
              <img id="back-button" src="./assets/images/back-icon.svg">
            </button>
            <div class="button-text">뒤로가기</div>
          </div>
          <div class="button-container">
            <div class="button-text">녹화하기</div>
          </div>
          <div class="button-container">
            <button class="share-button button" data-switch-screen="share" data-name="share">
              <img id="share-button" src="./assets/images/share-icon.svg">
            </button>
            <div class="button-text">공유하기</div>
          </div>
         </div>
       </div>
     </div>
  </div>

  <!--screen choose portal-->
  <div id="screen-choose-portal" data-name-screen="choose-portal" class="screen screen-choose-portal">
    <div class="screen__content">
      <div class="screen__body">
          <div class="cubs-screen choose-portal__container">
            <div class='cubs-container choose-portal-cubs'>
              <div class="cub choose-portal" data-name="portalA" data-switch-screen="before-portal" >
                <img src="./assets/gif/cube11.gif" alt="portal-real">
              </div>
              
              <div class="cub choose-portal" data-name="portalB" data-switch-screen="before-portal" >
                <img src="./assets/gif/cube22.gif" alt="portal-mult">
              </div>
            </div>
            
            <div class="cubs-text choose-portal-text">
              큐브를 선택하여 마음을 전하세요
            </div>
          </div>
      </div>
    </div>
  </div>

  <!--screen share portal-->
  <div id="screen-share" data-name-screen="share" data-switch-screen="portal" class="screen screen-share">
    <div class="screen__content">
      <div class="screen__body">
          <div class="cubs-screen share__container">
            <div class="cubs-container share-cubs">
              <div class="cub share" data-name="kakao">
                <a id="kakao-link-btn" href="javascript:sendLink()" >
                  <img src="./assets/gif/share_cub1.gif" alt="share-cub-kakao">
                </a>
              </div>
              <div class="cub share" data-name-"mobile">
                <a id="mobile-link-btn" href="#" >
                  <img src="./assets/gif/share_cub2.gif" alt="share-cub">
                </a>
              </div>
            </div>
            <div class="cubs-text share-text">
              소중한 사람에게 메시지를 전하세요
            </div>
          </div>
      </div>
    </div>
  </div>

  <!--screen view-->
  <div id="screen-view" data-name-screen="view" class="screen screen-view">
      <div class="screen__content">
          <div class="screen__body">
              
          </div>
      </div>
  </div>
  <div id="overlay" style="display: none" class="absolute-fill">
    <img id="recenterButton" src="./assets/textures/recenter.png"> 
    <span id="promptText"></span>
  </div>
</div>

<a-scene
  id="scene"
  start-flow
  background="color: skyblue"
  responsive-immersive
  landing-page="mediaSrc: #landing-page-video;"
  xrextras-custom-loading
  xrextras-runtime-error
  renderer="colorManagement: true;"
  xrweb="allowedDevices: any; disableDefaultEnvironment: true;"


  >

  <xrextras-resource id="landing-page-video" src="./assets/moon-portal.mp4"></xrextras-resource>

  <!-- We can define assets here to be loaded while the load screen is displayed -->
  <a-assets>
    <!-- models -->
    <a-asset-item id="portal-rim-model" src="./assets/models/portal.glb"></a-asset-item>
    
    <a-asset-item id="moon-model" src="./assets/models/moon-ground.glb"></a-asset-item>
    
    <a-asset-item id="ground-a" src="./assets/models/A_floor_update2.glb"></a-asset-item>
    <a-asset-item id="ground-a-letter" src="./assets/models/Aletter13.glb"></a-asset-item>
    
    <a-asset-item id="ground-b" src="./assets/models/SceneB10.glb"></a-asset-item>
    <a-asset-item id="tree-b" src="./assets/models/tree.glb"></a-asset-item>
    <a-asset-item id="tiger-b" src="./assets/models/tiger61.glb"></a-asset-item>
    <a-asset-item id="tiger-a" src="./assets/models/Atiger10.glb"></a-asset-item>
    
    <a-asset-item id="platform-model" src="./assets/models/platform.glb"></a-asset-item>
    <a-asset-item id="flag-model" src="./assets/models/flag.glb"></a-asset-item>
    <a-asset-item id="rocks-model" src="./assets/models/rocks.glb"></a-asset-item>
    <a-asset-item id="trainonly" src="./assets/models/trainonly2.glb"></a-asset-item>
    
    <!-- textures -->
    <img id="posx" src="./assets/textures/cubemap/posx.jpg">
    <img id="posy" src="./assets/textures/cubemap/posy.jpg">
    <img id="posz" src="./assets/textures/cubemap/posz.jpg">
    <img id="negx" src="./assets/textures/cubemap/negx.jpg">
    <img id="negy" src="./assets/textures/cubemap/negy.jpg">
    <img id="negz" src="./assets/textures/cubemap/negz.jpg">
    <img id="cloud2" src="./assets/textures/cloud2.png">
    <img id="cloud3" src="./assets/textures/cloud3.png">
    
    <img id="skybox-img" src="./assets/textures/skybox.jpg">
    
    <img id="skybox-a" src="./assets/textures/Asky3.jpg">
    <img id="skybox-b" src="./assets/textures/Bsky.jpg">
    
    <img id="screen-background-img" src="./assets/images/screenbackground360.jpg">
    
    <img id="blob-shadow-img" src="./assets/textures/blob-shadow.png">
    <img id="satellite-img" src="./assets/textures/satellite.png">
    <video id="portal-video" muted autoplay playsinline crossorigin="anonymous" loop="true" src="./assets/textures/saber8.mp4"></video>

    <audio id="portal-audio" crossorigin="anonymous" loop="true" preload="auto" src="./assets/music/music.mp3"></audio>
  </a-assets>

  <!-- Camera -->
  <a-camera
    id="camera"
    position="0 9 11"
    fov="100"
    cursor='rayOrigin: mouse; fuse: true; fuseTimeout: 0;'
    raycaster="objects: [clickhandler];"
    >

    <!--<a-entity id="screen3d_1" visible="true">-->
    <!--  <a-sky src="#screen-background-img" rotation="0 0 0"></a-sky>-->
      
    <!--  <a-box ice-component cubemap-static name="link_1" clickhandler color="tomato" position="0 1.2 -5" rotation="0 0 0" animation="property: rotation; to: 0 360 0; easing: linear; loop: true; dur: 10000"></a-box>-->
  
    <!--  <a-box ice-component cubemap-realtime name="link_2" clickhandler color="tomato" position="0 -1.2 -5" rotation="0 0 0" animation="property: rotation; to: 0 360 0; easing: linear; loop: true; dur: 10000"></a-box>-->
    <!--</a-entity>-->
  </a-camera>

  <!-- Lights -->
  <a-entity
    light="
      type: directional;
      castShadow: true;
      shadowMapHeight:2048;
      shadowMapWidth:2048;
      shadowCameraTop: 35;
      shadowCameraBottom: -20;
      shadowCameraRight: 40;
      shadowCameraLeft: -10;
      target: #portalRim"
    xrextras-attach="target: portalRim; offset: 18 7 14"
    shadow>
  </a-entity>
  
  <a-light type="ambient" intensity="0.5"></a-light>

  <a-entity id="scene_content" visible="false">
    
    <!-- Hider walls -->
    <xrextras-opaque-background remove="true">
      <a-entity id="hider-walls">
        <a-box scale="100 1 100" position="0 -1 49" xrextras-hider-material></a-box>
        <a-box scale="100 100 1" position="0 50 75" xrextras-hider-material></a-box>
        <a-box scale="100 1 100" position="0 100 49" xrextras-hider-material></a-box>
        <a-box scale="1 100 100" position="-30 50 50" xrextras-hider-material></a-box>
        <a-box scale="1 100 100" position="30 50 50" xrextras-hider-material></a-box>
        <a-ring id="portalHiderRing" radius-inner="0.001" radius-outer="100" position="0 7.5 -0.2" xrextras-hider-material></a-ring>
        <a-ring id="portalHiderWall" radius-inner="4.5" radius-outer="100" position="0 7.5 -0.4" xrextras-hider-material></a-ring>
      </a-entity>
    
       <a-entity id="portal-wall">
        <a-circle radius="5.2" rotation="0 180 0" position="0 7.5 0" scale="0.8 0.8 0" xrextras-hider-material></a-circle>
        <a-circle radius="5.2" rotation="0 180 0" position="0 7.5 0.25" scale="0.8 0.8 0" xrextras-hider-material></a-circle>
      </a-entity>
    </xrextras-opaque-background>
  
    

  
    <!-- Portal Contents -->
    <a-entity id="portal-contents">
  
      <a-entity
        id="portalA"
        gltf-model="#ground-a"
        rotation="0 90 0"
        position="8 8 -80"
        scale="0.5 0.5 0.5">

          <a-entity
            id="portal-a-letter"
            gltf-model="#ground-a-letter"
            shadow="cast: true"
            >
          </a-entity>

          <a-entity 
              id='tiger-portal2'
              no-cull
              gltf-model="#tiger-a"
              scale="0.5 0.5 0.5"
              position="-125 -24.5 -25"
              rotation="0 0 0"
              shadow="cast: true">
            </a-entity>

            <a-entity light="type: directional; color: ##ffeacc; intensity: 0.5" position="-1 1 0"></a-entity>

          <a-sky id="portal-sky" src="#skybox-a" rotation="0  0"></a-sky>

      </a-entity>

      <a-entity
        id="portalB">

             
            
          <a-entity particle-system="preset: snow; particleCount: 10000; " ></a-entity>


            

           <a-entity
            id="ground-b-obj"
            gltf-model="#ground-b"
            no-cull
            rotation="0 -0 0"
            position="30 -6 -110"
            scale="40 40 40">
           
             
            <a-entity 
              gltf-model="#tree-b"
              shadow="cast: true">
            </a-entity>

            <a-entity 
              id='tiger-portal'
              no-cull
              gltf-model="#tiger-b"
              position="-1.8 0.17 3"
              rotation="0 0 0"
              scale="0.006 0.006 0.006"
              shadow="cast: true">
            </a-entity>

            
              <a-entity 
              id='train-portal'
              gltf-model="#trainonly"
              position="-2 0.76 2.175"
              scale="0.1 0.1 0.1">
                
              </a-entity>

               <a-plane
             id='cloud2'
             material="src: #cloud2; transparent: true;  "
             rotation="0 0 0"
             position="0 1.5 0"
             scale="1.2 1.2 1.2"
             shadow="receive: false">
            </a-plane>

             <a-plane
             id='cloud2'
             material="src: #cloud2; transparent: true;  "
             rotation="0 0 0"
             position="-1 3 -1"
             scale="1 1 1"
             shadow="receive: false">
            </a-plane>

           <a-plane
             id='cloud2'
             material="src: #cloud2; transparent: true;  "
             rotation="0 0 0"
             position="-3 3 -2"
             scale="1 1 1"
             shadow="receive: false">
            </a-plane>

             <a-plane
             id='cloud3'
             material="src: #cloud3; transparent: true;  "
             rotation="0 0 0"
             position="2.5 2.5 -1"
             scale="3 3 3"
             shadow="receive: false">
            </a-plane>

            <a-plane
             id='cloud3'
             material="src: #cloud3; transparent: true;  "
             rotation="0 0 0"
             position="-3 2 -2"
             scale="2 2 2"
             shadow="receive: false">
            </a-plane>
            
            

            
          </a-entity>

          <a-sky id="portal-sky" src="#skybox-b" rotation="0 7 0"></a-sky>

      </a-entity>

      <!--<a-entity-->
      <!--  gltf-model="#ground-b"-->
      <!--  animation-mixer="clips: *" -->
      <!--  rotation="0 -0 0"-->
      <!--  position="1 0 -39"-->
      <!--  scale="2 2 2">-->
      <!--</a-entity>-->
  
      <!--<a-entity-->
      <!--  gltf-model="#platform-model"-->
      <!--  rotation="0 -90 0"-->
      <!--  cubemap-static-->
      <!--  position="-0.4 0 -10"-->
      <!--  scale="9 9 9"-->
      <!--  shadow="receive: false">-->
      <!--</a-entity>-->
      
      <!--<a-plane-->
      <!--  material="src: #satellite-img; transparent: true; roughness: 0.8; metalness: 0"-->
      <!--  rotation="0 30 0"-->
      <!--  position="-200 150 -250"-->
      <!--  scale="120 80 1"-->
      <!--  shadow="receive: false">-->
      <!-- </a-plane>-->
      
      <!-- <a-entity-->
      <!--  gltf-model="#flag-model"-->
      <!--  rotation="0 30 0"-->
      <!--  cubemap-static-->
      <!--  position="-14 0 -43"-->
      <!--  scale="5 5 5"-->
      <!--  shadow="receive: false">-->
      <!-- </a-entity>-->
      
      <!-- <a-entity-->
      <!--  gltf-model="#rocks-model"-->
      <!--  cubemap-static-->
      <!--  position="-14 -1 -42"-->
      <!--  scale="0.75 0.25 0.75"-->
      <!--  shadow="receive: false">-->
      <!-- </a-entity>-->
        
       <!--<a-sky id="portal-sky" src="#skybox-a" rotation="0 7 0"></a-sky>-->
       <!--<a-sky id="portal-sky" src="#skybox-b" rotation="0 7 0"></a-sky>-->
    </a-entity>


    <!--<a-entity-->
    <!--  id="portalRim"-->
    <!--  gltf-model="#portal-rim-model"-->
    <!--  spin="axis: x; speed: 14000"-->
    <!--  cubemap-realtime-->
    <!--  position="0 7.5 0"-->
    <!--  rotation="90 -90 -90"-->
    <!--  scale="0.001 0.001 0.001"-->
    <!--  shadow="receive: false">-->
    <!--</a-entity>-->
  
    <!-- Portal -->
    <a-entity
      id="portalRim"
      spin="axis: x; speed: 14000"
      cubemap-realtime
      position="0 7.5 0"
      rotation="90 -90 -90"
      scale="0.001 0.001 0.001"
      shadow="receive: false">
    </a-entity>
  
    <a-entity
      id="portalVideo"
      auto-play-video="video: #portal-video"
      material="shader: flat; src: #portal-video; blending: additive; side: front"
      geometry="primitive: plane; height: 1.45; width: 1.45;"
      position="0 7.5 0.1"
      scale="0.001 0.001 0.001">
    </a-entity>
  
    <a-circle
      id="portalShadow"
      radius="0.5"
      material="src: #blob-shadow-img; opacity: 0.65; roughness: 0.8; metalness: 0"
      position="0 0.01 1.25"
      rotation="-90 0 0"
      scale="0.001 0.001 0.001">
    </a-circle>

  </a-entity>


<xrextras-capture-button capture-mode="standard"></xrextras-capture-button>

<!--watermark-image-url="//cdn.8thwall.com/web/img/mediarecorder/8logo.png"-->
  <!--footer-image-url="//cdn.8thwall.com/web/img/almostthere/v2/poweredby-horiz-white-2.svg"-->

<xrextras-capture-config
  max-duration-ms="15000"
  max-dimension="1280"
  enable-end-card="true"
  cover-image-url=""
  end-card-call-to-action="Try it at:"
  short-link=""
  footer-image-url=""
  file-name-prefix="my-capture-"
></xrextras-capture-config>

<xrextras-capture-preview
  action-button-share-text="공유하기"
  action-button-view-text="View"
  finalize-text="Exporting..."
></xrextras-capture-preview>



  
  
</a-scene>
